(function(e){var l=new google.maps.Geocoder,f=e.fn.autoGeocoder=function(a){a=e.extend(!0,{},f.defaults,a||{});var b=a.setup||f.base;for(property in b)for(var c=b[property],d=0,g=c.length;d<g;d++)c[d].call(this,a);return this.trigger("auto-geocoder.initialize")};f.base={initialize:[function(a){a.initial.center=new google.maps.LatLng(a.initial.center[0],a.initial.center[1]);this.on("auto-geocoder.initialize",function(){e(this).trigger("auto-geocoder.createMap").trigger("auto-geocoder.onKeyUp")})}],
createMap:[function(a){this.on("auto-geocoder.createMap",function(){var b=e(this),c=e("<div>",{"class":a.className}),d=a.position;if("before"==d||"after"==d)b[d](c);else e(d).append(c);b.on("keyup.auto-geocoder",function(){b.trigger("auto-geocoder.onKeyUp")});this.map=new google.maps.Map(c[0],a.initial)})}],onKeyUp:[function(a){this.on("auto-geocoder.onKeyUp",function(){var b=e(this),c=e.trim(b.val()).replace(/\s+/g," ").toLowerCase(),d=this.previousAddress;clearTimeout(this.timeout);d&&d==c||(""==
c?b.trigger("auto-geocoder.onGeocodeResult",[[],""]):this.timeout=setTimeout(e.proxy(function(){this.previousAddress=c;l.geocode({address:c},function(a,c){b.trigger("auto-geocoder.onGeocodeResult",[a,c])})},this),a.delay))})}],onGeocodeResult:[function(a){this.on("auto-geocoder.onGeocodeResult",function(b,c,d){b=this.map;var g=a.success.zoom,f=this.marker=this.marker||new google.maps.Marker;if(d==google.maps.GeocoderStatus.OK){var h=c[0].geometry,k=h.location;"auto"==g?b.fitBounds(h.viewport):(b.setZoom(g),
b.setCenter(k));f.setPosition(k);f.setMap(b);e(this).trigger("auto-geocoder.onGeocodeSuccess",[c,d])}else g=a.initial,f&&f.setMap(null),b.setZoom(g.zoom),b.setCenter(g.center),e(this).trigger("auto-geocoder.onGeocodeFailure",[c,d])})}],onGeocodeSuccess:[],onGeocodeFailure:[]};f.defaults={className:"jquery-auto-geocoder-map",position:"after",delay:500,success:{zoom:"auto"},initial:{zoom:1,center:[34,0],draggable:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1,disableDefaultUI:!0,disableDoubleClickZoom:!0}}})(jQuery);
